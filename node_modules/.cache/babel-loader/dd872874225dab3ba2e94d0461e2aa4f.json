{"ast":null,"code":"import * as chartJs from \"chart.js\";\nlet chart;\nexport const formatDateLabel = timestamp => {\n  const date = new Date(timestamp);\n  const month = date.getMonth();\n  const day = date.getDate();\n\n  const formatPart = value => {\n    return value < 10 ? `0${value}` : `${value}`;\n  };\n\n  return `${formatPart(day)}/${formatPart(month + 1)}`;\n};\nexport const renderChart = readings => {\n  chartJs.Chart.defaults.font.size = \"10px\";\n  chartJs.Chart.register.apply(null, Object.values(chartJs).filter(chartClass => chartClass.id));\n  const labels = readings.map(_ref => {\n    let {\n      time\n    } = _ref;\n    return formatDateLabel(time);\n  });\n  const values = readings.map(_ref2 => {\n    let {\n      value\n    } = _ref2;\n    return value;\n  }); //total energy consumption\n\n  const sum = values.reduce(function (pre, cur, index, array) {\n    return pre + cur;\n  });\n  console.log(sum); //get the nearest integer\n\n  const sum1 = sum.toFixed(0); // console.log(sum1);\n  // card1 data (costx0.138)\n\n  const cost = sum * 0.138; // console.log(cost);\n\n  const cost1 = cost.toFixed(0); // console.log(cost1);\n  // push cost to card1\n\n  document.getElementById(\"crd1\").innerHTML = \"$\" + cost1; // console.log(3);\n  //push total consumption to card2\n\n  document.getElementById(\"crd2\").innerHTML = sum1 + \"kWh\"; //card3 data (sum x 0.0002532)\n\n  const footPrint = sum * 0.0002532;\n  const fooPrint1 = footPrint.toFixed(4); // console.log(fooPrint1);\n  // push footprint to card3\n\n  document.getElementById(\"crd3\").innerHTML = fooPrint1;\n  const data = {\n    labels: labels,\n    datasets: [{\n      label: \"kWh usage\",\n      data: values,\n      fill: true,\n      borderColor: \"rgb(75, 192, 192)\",\n      tension: 0.1,\n      borderWidth: 0.2,\n      backgroundColor: \"#5A8EDA\",\n      borderRadius: 10\n    }]\n  };\n\n  if (chart) {\n    chart.destroy();\n  }\n\n  chart = new chartJs.Chart(\"usageChart\", {\n    type: \"bar\",\n    data: data,\n    options: {\n      scales: {\n        y: {\n          grid: {\n            display: false\n          }\n        },\n        x: {\n          grid: {\n            display: false\n          }\n        }\n      },\n      plugins: {\n        legend: {\n          display: false\n        }\n      },\n      maintainAspectRatio: false\n    }\n  });\n};","map":{"version":3,"sources":["/Users/ray/Desktop/epam test/test/src/components/chart.js"],"names":["chartJs","chart","formatDateLabel","timestamp","date","Date","month","getMonth","day","getDate","formatPart","value","renderChart","readings","Chart","defaults","font","size","register","apply","Object","values","filter","chartClass","id","labels","map","time","sum","reduce","pre","cur","index","array","console","log","sum1","toFixed","cost","cost1","document","getElementById","innerHTML","footPrint","fooPrint1","data","datasets","label","fill","borderColor","tension","borderWidth","backgroundColor","borderRadius","destroy","type","options","scales","y","grid","display","x","plugins","legend","maintainAspectRatio"],"mappings":"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","sourcesContent":["import * as chartJs from \"chart.js\";\n\nlet chart;\n\nexport const formatDateLabel = (timestamp) => {\n  const date = new Date(timestamp);\n  const month = date.getMonth();\n  const day = date.getDate();\n\n  const formatPart = (value) => {\n    return value < 10 ? `0${value}` : `${value}`;\n  };\n\n  return `${formatPart(day)}/${formatPart(month + 1)}`;\n};\n\nexport const renderChart = (readings) => {\n  chartJs.Chart.defaults.font.size = \"10px\";\n\n  chartJs.Chart.register.apply(\n    null,\n    Object.values(chartJs).filter((chartClass) => chartClass.id)\n  );\n\n  const labels = readings.map(({ time }) => formatDateLabel(time));\n  const values = readings.map(({ value }) => value);\n\n  //total energy consumption\n  const sum = values.reduce(function (pre, cur, index, array) {\n    return pre + cur;\n  });\n  console.log(sum);\n\n  //get the nearest integer\n  const sum1 = sum.toFixed(0);\n\n  // console.log(sum1);\n\n  // card1 data (costx0.138)\n  const cost = sum * 0.138;\n  // console.log(cost);\n  const cost1 = cost.toFixed(0);\n  // console.log(cost1);\n\n  // push cost to card1\n  document.getElementById(\"crd1\").innerHTML = \"$\" + cost1;\n  // console.log(3);\n\n  //push total consumption to card2\n  document.getElementById(\"crd2\").innerHTML = sum1 + \"kWh\";\n\n  //card3 data (sum x 0.0002532)\n  const footPrint = sum * 0.0002532;\n  const fooPrint1 = footPrint.toFixed(4);\n  // console.log(fooPrint1);\n  // push footprint to card3\n  document.getElementById(\"crd3\").innerHTML = fooPrint1;\n\n  const data = {\n    labels: labels,\n    datasets: [\n      {\n        label: \"kWh usage\",\n        data: values,\n        fill: true,\n        borderColor: \"rgb(75, 192, 192)\",\n        tension: 0.1,\n        borderWidth: 0.2,\n        backgroundColor: \"#5A8EDA\",\n        borderRadius: 10,\n      },\n    ],\n  };\n\n  if (chart) {\n    chart.destroy();\n  }\n\n  chart = new chartJs.Chart(\"usageChart\", {\n    type: \"bar\",\n    data: data,\n    options: {\n      scales: {\n        y: {\n          grid: {\n            display: false,\n          },\n        },\n        x: {\n          grid: {\n            display: false,\n          },\n        },\n      },\n      plugins: {\n        legend: {\n          display: false,\n        },\n      },\n      maintainAspectRatio: false,\n    },\n  });\n};\n"]},"metadata":{},"sourceType":"module"}